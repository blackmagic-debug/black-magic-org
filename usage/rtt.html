<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href="../_static/favicon/icon.svg">
    <link rel="icon" sizes="16x16" type="image/png" href="../_static/favicon/favicon-16x16.png">
    <link rel="icon" sizes="32x32" type="image/png" href="../_static/favicon/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="57x57" type="image/png" href="../_static/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" type="image/png" href="../_static/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" type="image/png" href="../_static/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" type="image/png" href="../_static/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="96x96" type="image/png" href="../_static/favicon/apple-touch-icon-96x96.png">
    <link rel="apple-touch-icon" sizes="114x114" type="image/png" href="../_static/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" type="image/png" href="../_static/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" type="image/png" href="../_static/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" type="image/png" href="../_static/favicon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" type="image/png" href="../_static/favicon/apple-touch-icon-180x180.png">
    <link rel="android-icon" sizes="192x192" type="image/png" href="../_static/favicon/android-icon-192x192.png"><meta property="og:title" content="Using RTT" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://black-magic.org/usage/rtt.html" />
<meta property="og:site_name" content="Black Magic Debug" />
<meta property="og:description" content="When debugging ARM processors, there are multiple ways for the target to print debug messages on the host: a dedicated UART port (USB to Serial) aka. AUX Serial, Semihosting, Serial Wire Output (SW..." />
<meta property="og:image" content="https://black-magic.org/_static/blackmagic-logo.png" />
<meta property="og:image:alt" content="Black Magic Debug" />
<meta name="description" content="When debugging ARM processors, there are multiple ways for the target to print debug messages on the host: a dedicated UART port (USB to Serial) aka. AUX Serial, Semihosting, Serial Wire Output (SW..." />

    <title>Using RTT &#8212; Black Magic Debug  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/asciinema-player_3.6.3.css" />
    <link rel="stylesheet" type="text/css" href="../_static/platformpicker.css" />
    <script src="../_static/documentation_options.js?v=7f41d439"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/asciinema-player_3.6.3.js"></script>
    <script src="../_static/platformpicker.js"></script>
    <link rel="canonical" href="https://black-magic.org/usage/rtt.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PlatformIO" href="platformio.html" />
    <link rel="prev" title="Serial Wire Output" href="swo.html" /> 
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  
 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Blog"
/>
  
  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <section id="using-rtt">
<h1>Using RTT<a class="headerlink" href="#using-rtt" title="Link to this heading">¶</a></h1>
<p>When debugging ARM processors, there are multiple ways for the target to print debug messages on
the host:</p>
<ul class="simple">
<li><p>a dedicated UART port (USB to Serial) aka. AUX Serial</p></li>
<li><p>Semihosting</p></li>
<li><p>Serial Wire Output (SWO)</p></li>
<li><p>Real-Time Transfer (RTT).</p></li>
</ul>
<p>To enable RTT in <a class="reference external" href="https://black-magic.org">Black Magic Debug</a> (BMD) Firmware, the <code class="docutils literal notranslate"><span class="pre">ENABLE_RTT=1</span></code> flag has to be
set during compilation. With the Meson build system, that would be done by setting the <code class="docutils literal notranslate"><span class="pre">rtt_support</span></code> flag to true.
Look at the firmware building <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic?tab=readme-ov-file#building-the-firmware">instructions</a>
for more details.</p>
<p>The RTT solution implemented in BMD uses a novel way to detect RTT automatically, making it fast and convenient.</p>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>This example uses Linux as operating system. For Windows and macOS see the <a class="reference internal" href="#operating-systems">Operating Systems</a> section.</p>
<p>In one window open a terminal emulator (minicom, putty, etc) and connect to the USB UART:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ minicom -c on -D /dev/ttyBmpTarg
</pre></div>
</div>
<p>In another window open a debugger:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gdb
(gdb) target extended-remote /dev/ttyBmpGdb
(gdb) monitor swdp_scan
(gdb) attach 1
(gdb) monitor rtt
(gdb) run
^C
(gdb) monitor rtt status
rtt: on found: yes ident: off halt: off channels: auto 0 1 3
max poll ms: 256 min poll ms: 8 max errs: 10
</pre></div>
</div>
<p>The terminal emulator displays RTT output from the target, and characters typed
in the terminal emulator are sent via RTT to the target.</p>
<p>It is possible to use RTT and the built-in serial port at the same time. If both RTT and the built-in serial port
are used at the same time, the terminal will show both RTT and serial port output, interleaved.</p>
<p>Characters typed in at the terminal go to RTT if RTT is enabled, or to the serial port if RTT is not enabled.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span></code>: If RTT is enabled, characters typed in at the terminal are sent to target RTT.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">disable</span></code>: if RTT is disabled (default), characters typed in at the terminal are sent to the
built-in serial port.</p></li>
</ul>
</section>
<section id="gdb-commands">
<h2>GDB Commands<a class="headerlink" href="#gdb-commands" title="Link to this heading">¶</a></h2>
<p>The following new GDB commands are available:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span></code></p>
<p>switch rtt on</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">enable</span></code></p>
<p>switch rtt on</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">disable</span></code></p>
<p>switch rtt off</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">poll</span> <span class="pre">max_poll_ms</span> <span class="pre">min_poll_ms</span> <span class="pre">max_errs</span></code></p>
<p>sets maximum time between polls, minimum time between polls, and the maximum number of
errors before RTT disconnects from the target. Times in milliseconds. It is best if
max_poll_ms/min_poll_ms is a power of two. As an example, if you wish to check for RTT
output between once per second to eight times per second: <code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">poll</span> <span class="pre">1000</span> <span class="pre">125</span> <span class="pre">10</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">status</span></code></p>
<p>show status.</p>
</li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>rtt</p></th>
<th class="head"><p>found</p></th>
<th class="head"><p>state</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>rtt: off</p></td>
<td><p>found: no</p></td>
<td><p>rtt inactive</p></td>
</tr>
<tr class="row-odd"><td><p>rtt: on</p></td>
<td><p>found: no</p></td>
<td><p>searching for rtt control block</p></td>
</tr>
<tr class="row-even"><td><p>rtt: on</p></td>
<td><p>found: yes</p></td>
<td><p>rtt active</p></td>
</tr>
<tr class="row-odd"><td><p>rtt: off</p></td>
<td><p>found: yes</p></td>
<td><p>corrupt rtt control block, or target memory access error</p></td>
</tr>
</tbody>
</table>
<p>A status of <code class="docutils literal notranslate"><span class="pre">rtt:</span> <span class="pre">on</span> <span class="pre">found:</span> <span class="pre">no</span></code> indicates BMP is still searching for the rtt control block in
target ram, but has not found anything yet. A status of  <code class="docutils literal notranslate"><span class="pre">rtt:</span> <span class="pre">on</span> <span class="pre">found:</span> <span class="pre">yes</span></code> indicates the
control block has been found and rtt is active.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">channel</span></code></p>
<p>enables the first two output channels, and the first input channel. (default)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">channel</span> <span class="pre">number...</span></code></p>
<p>enables the given RTT channel numbers. Channels are numbers from 0 to 15, inclusive.
Eg. <code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">channel</span> <span class="pre">0</span> <span class="pre">1</span> <span class="pre">4</span></code> to enable channels 0, 1, and 4.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">ram</span></code></p>
<p>rtt scans all of target memory for the rtt control block. (default)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">ram</span> <span class="pre">startaddress</span> <span class="pre">endaddress</span></code></p>
<p>limit rtt scan of target memory to address range given. Values in hex. Use if scanning memory hangs the
debugger. E.g. to limit rtt scans to the first 8kbyte of ram, beginning at 0x20000000:</p>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">mon</span> <span class="n">rtt</span> <span class="n">ram</span> <span class="mh">0x20000000</span> <span class="mh">0x20002000</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">mon</span> <span class="n">rtt</span> <span class="n">status</span>
<span class="n">rtt</span><span class="p">:</span> <span class="n">off</span> <span class="n">found</span><span class="p">:</span> <span class="n">no</span> <span class="n">ident</span><span class="p">:</span> <span class="n">off</span> <span class="n">halt</span><span class="p">:</span> <span class="n">off</span> <span class="n">channels</span><span class="p">:</span> <span class="n">auto</span> <span class="n">ram</span><span class="p">:</span> <span class="mh">0x20000000</span> <span class="mh">0x20002000</span>
<span class="nb">max</span> <span class="n">poll</span> <span class="n">ms</span><span class="p">:</span> <span class="mi">256</span> <span class="nb">min</span> <span class="n">poll</span> <span class="n">ms</span><span class="p">:</span> <span class="mi">8</span> <span class="nb">max</span> <span class="n">errs</span><span class="p">:</span> <span class="mi">10</span>
</pre></div>
</div>
<p>If automatic detection fails, please take the linker map of your firmware, and search for a symbol that contains
the word RTT somewhere at the beginning of ram. Look for a block with size a multiple of 24 decimal, word-aligned.
For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grep</span> <span class="mi">2000</span> <span class="n">HelloWorld</span><span class="o">.</span><span class="n">ino</span><span class="o">.</span><span class="n">map</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">RTT</span>
</pre></div>
</div>
<p>For BMP to find the rtt control block, the rtt control block has to exist, be within the address range of
<code class="docutils literal notranslate"><span class="pre">(gdb)</span> <span class="pre">info</span> <span class="pre">mem</span></code>, or if <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">rtt</span> <span class="pre">ram</span></code> has been specified, within the address range of <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">rtt</span> <span class="pre">ram</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">ident</span> <span class="pre">string</span></code></p>
<p>sets RTT ident to <code class="docutils literal notranslate"><span class="pre">string</span></code>. If <code class="docutils literal notranslate"><span class="pre">string</span></code> contains a space, replace the space with an
underscore. Setting the ident string is optional, RTT works fine without it.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">ident</span></code></p>
<p>clears ident string (default)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">cblock</span></code></p>
<p>shows rtt control block data, and which channels are enabled. This is an example
control block:</p>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">mon</span> <span class="n">rtt</span> <span class="n">cb</span>
<span class="n">cbaddr</span><span class="p">:</span> <span class="mh">0x2000071c</span>
<span class="n">ch</span> <span class="n">ena</span> <span class="n">i</span><span class="o">/</span><span class="n">o</span> <span class="n">buffer</span><span class="o">@</span>      <span class="n">size</span>   <span class="n">head</span>   <span class="n">tail</span> <span class="n">flag</span>
 <span class="mi">0</span>   <span class="n">y</span> <span class="n">out</span> <span class="mh">0x200000ac</span>   <span class="mi">1024</span>     <span class="mi">14</span>     <span class="mi">14</span>    <span class="mi">0</span>
 <span class="mi">1</span>   <span class="n">y</span> <span class="n">out</span> <span class="mh">0x00000000</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>
 <span class="mi">2</span>   <span class="n">n</span> <span class="n">out</span> <span class="mh">0x00000000</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>
 <span class="mi">3</span>   <span class="n">y</span> <span class="ow">in</span>  <span class="mh">0x2000009c</span>     <span class="mi">16</span>      <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>
 <span class="mi">4</span>   <span class="n">n</span> <span class="ow">in</span>  <span class="mh">0x00000000</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>
 <span class="mi">5</span>   <span class="n">n</span> <span class="ow">in</span>  <span class="mh">0x00000000</span>      <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>
</pre></div>
</div>
<p>Channels are listed, one channel per line. The columns are: channel, enabled, input/output, buffer address,
buffer size, head pointer, tail pointer, flag. Each channel is a circular buffer with head and tail pointer.
The column ‘flag’ is the action taken when the buffer is full.</p>
<p>Channels the user wants to see are marked yes <code class="docutils literal notranslate"><span class="pre">y</span></code> in the column enabled <code class="docutils literal notranslate"><span class="pre">ena</span></code>. The user can
change which channels are shown with the <code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">channel</span></code> command.</p>
<p><code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">enable</span></code> forces searching the control block next time the program runs.</p>
</section>
<section id="identifier-string">
<h2>Identifier String<a class="headerlink" href="#identifier-string" title="Link to this heading">¶</a></h2>
<p>It is possible to set an RTT identifier string.
As an example, if the RTT identifier is “IDENT STR”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ gdb
(gdb) target extended-remote /dev/ttyBmpGdb
(gdb) monitor swdp_scan
(gdb) attach 1
(gdb) monitor rtt ident IDENT_STR
(gdb) monitor rtt
(gdb) run
^C
(gdb) monitor rtt status
rtt: on found: yes ident: &quot;IDENT STR&quot; halt: off channels: auto 0 1 3
max poll ms: 256 min poll ms: 8 max errs: 10
</pre></div>
</div>
<p>Note that the space is replaced with an underscore in <code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">ident</span></code>.</p>
<p>Setting an identifier string is optional. RTT gives the same output at the same speed, with or
without specifying an identifier string.</p>
</section>
<section id="operating-systems">
<h2>Operating Systems<a class="headerlink" href="#operating-systems" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="../getting-started.html"><span class="std std-doc">Configuration</span></a> instructions for Windows, Linux and MacOS.</p>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Link to this heading">¶</a></h3>
<p>After configuration, Black Magic Probe shows up in Windows as two <em>USB Serial (CDC)</em> ports.</p>
<p>Connect arm-none-eabi-gdb, the gnu debugger for arm processors, to the lower numbered of the
two COM ports. Connect an ansi terminal emulator to the higher numbered of the two COM ports.</p>
<p>Sample GDB session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">target</span> <span class="n">extended</span><span class="o">-</span><span class="n">remote</span> <span class="n">COM3</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">monitor</span> <span class="n">swdp_scan</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">1</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">monitor</span> <span class="n">rtt</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">run</span>
</pre></div>
</div>
<p>For COM port COM10 and higher, add the prefix <code class="docutils literal notranslate"><span class="pre">\\.\</span></code>, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">target</span> <span class="n">extended</span><span class="o">-</span><span class="n">remote</span> \\<span class="o">.</span>\<span class="n">COM10</span>
</pre></div>
</div>
<p>Target RTT output will appear in the terminal, and what you type in the terminal will be sent
to the RTT input of the target.</p>
</section>
<section id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Link to this heading">¶</a></h3>
<p>On Linux, install the udev rules as described in the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/blob/main/driver/README.md">driver
documentation</a>.
Disconnect and re-connect the BMP. Check the device shows up in /dev/ :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls -l /dev/ttyBmp*
lrwxrwxrwx 1 root root 7 Dec 13 07:29 /dev/ttyBmpGdb -&gt; ttyACM0
lrwxrwxrwx 1 root root 7 Dec 13 07:29 /dev/ttyBmpTarg -&gt; ttyACM2
</pre></div>
</div>
<p>Connect terminal emulator to /dev/ttyBmpTarg and GDB to /dev/ttyBmpGdb .</p>
<p>In one window:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minicom</span> <span class="o">-</span><span class="n">c</span> <span class="n">on</span> <span class="o">-</span><span class="n">D</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyBmpTarg</span>
</pre></div>
</div>
<p>In another window :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdb</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">target</span> <span class="n">extended</span><span class="o">-</span><span class="n">remote</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ttyBmpGdb</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">monitor</span> <span class="n">swdp_scan</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">1</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">monitor</span> <span class="n">rtt</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">run</span>
</pre></div>
</div>
</section>
<section id="macos">
<h3>macOS<a class="headerlink" href="#macos" title="Link to this heading">¶</a></h3>
<p>On macOS the tty devices have different names than on Linux. On connecting a BMP to the
computer, 4 devices are created: 2 ‘tty’ and 2 ‘cu’ devices. GDB connects to the first cu device
(e.g.: <code class="docutils literal notranslate"><span class="pre">target</span> <span class="pre">extended-remote</span> <span class="pre">/dev/cu.usbmodemDDCEC9EC1</span></code>), while RTT is connected to the
second tty device (<code class="docutils literal notranslate"><span class="pre">minicom</span> <span class="pre">-c</span> <span class="pre">on</span> <span class="pre">-D</span> <span class="pre">/dev/tty.usbmodemDDCEC9EC3</span></code>). In full:</p>
<p>In one Terminal window, connect a terminal emulator to /dev/tty.usbmodemDDCEC9EC3 :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minicom</span> <span class="o">-</span><span class="n">c</span> <span class="n">on</span> <span class="o">-</span><span class="n">D</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">tty</span><span class="o">.</span><span class="n">usbmodemDDCEC9EC3</span>
</pre></div>
</div>
<p>In another Terminal window, connect GDB to /dev/cu.usbmodemDDCEC9EC1 :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdb</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">target</span> <span class="n">extended</span><span class="o">-</span><span class="n">remote</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">cu</span><span class="o">.</span><span class="n">usbmodemDDCEC9EC1</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">monitor</span> <span class="n">swdp_scan</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">attach</span> <span class="mi">1</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">monitor</span> <span class="n">rtt</span>
<span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="n">run</span>
</pre></div>
</div>
<p>RTT input/output is in the window running <code class="docutils literal notranslate"><span class="pre">minicom</span></code>.</p>
</section>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Design goal was smallest, simplest implementation that has good practical use.</p></li>
<li><p>RTT code size is ~3.5 kbytes.</p></li>
<li><p>Because RTT is implemented as a serial port device, there is no need to write and maintain
software for different host operating systems. A serial port works everywhere - Linux,
Windows and MacOS. You can even use an Android mobile phone as RTT terminal.</p></li>
<li><p>Because polling occurs between debugger probe and target, the load on the host is small.
There is no constant usb traffic, there are no real-time requirements on the host.</p></li>
<li><p>RTT polling frequency is adaptive and goes up and down with RTT activity. Use <code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">poll</span></code> to balance response speed and target load for your use.</p></li>
<li><p>Detects RTT automatically, very convenient.</p></li>
<li><p>When using RTT as a terminal, sending data from host to target, you may need to change local
echo, carriage return and/or line feed settings in your terminal emulator.</p></li>
<li><p>Architectures such as risc-v may not allow the debugger to access target memory while the
target is running. As a workaround, on these architectures RTT briefly halts the target
during polling. If the target is halted during polling, <code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">status</span></code> shows <code class="docutils literal notranslate"><span class="pre">halt:</span> <span class="pre">on</span></code>.</p></li>
<li><p>Measured RTT speed.</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>debugger</p></th>
<th class="head"><p>char/s</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>bmp stm32f723 stlinkv3</p></td>
<td><p>49811</p></td>
</tr>
<tr class="row-odd"><td><p>bmp stm32f411 black pill</p></td>
<td><p>50073</p></td>
</tr>
<tr class="row-even"><td><p>bmp stm32f103 blue pill</p></td>
<td><p>50142</p></td>
</tr>
</tbody>
</table>
<p>This is the speed at which characters can be sent from target to debugger probe, in reasonable
circumstances. Test target is an stm32f103 blue pill running an <a class="reference external" href="https://github.com/koendv/Arduino-RTTStream/blob/main/examples/SpeedTest/SpeedTest.ino">Arduino
sketch</a>.
Default <code class="docutils literal notranslate"><span class="pre">monitor</span> <span class="pre">rtt</span> <span class="pre">poll</span></code> settings on debugger. Default RTT buffer size in target and
debugger. Overhead for printf() calls included.</p>
</section>
<section id="links">
<h2>Links<a class="headerlink" href="#links" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://openocd.org/doc/html/General-Commands.html#Real-Time-Transfer-_0028RTT_0029">OpenOCD</a></p></li>
<li><p><a class="reference external" href="https://probe.rs/">probe-rs</a> and <a class="reference external" href="https://github.com/mvirkkunen/rtt-target">rtt-target</a> for the
<em>rust</em> programming language.</p></li>
<li><p><a class="reference external" href="https://github.com/koendv/Arduino-RTTStream">RTT Stream</a> for Arduino on arm processors</p></li>
</ul>
</section>
</section>

<div class="section ablog__blog_comments">
   
</div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/blackmagic-logo.svg" alt="Logo" />
    
  </a>
</p>



<p class="blurb">The Plug&Play MCU Debugger</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=blackmagic-debug&repo=blackmagic&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hardware.html">Supported Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade.html">Firmware Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supported-targets.html">Supported Targets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Knowledgebase</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../knowledge/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge/terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge/pinouts.html">Pinout Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge/compiling-windows.html">Compiling on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge/bmputil-on-windows.html">Building <code class="docutils literal notranslate"><span class="pre">bmputil</span></code> on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../knowledge/links.html">Links</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gdb-commands.html">GDB Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdb-automation.html">GDB Flash Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="semihosting.html">Semihosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="swo.html">Serial Wire Output</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using RTT</a></li>
<li class="toctree-l1"><a class="reference internal" href="platformio.html">PlatformIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="stm32cubeide.html">STM32CubeIDE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Target Specific Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../target-usage/stm32.html">STM32 Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target-usage/sam3x-4x-x7x.html">SAM3x-4x-x7x</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hacking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hacking/contrib.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hacking/hacking.html">Firmware Hacking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hacking/target-drivers.html">Adding Target Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hacking/target-cortex-m.html">Cortex-M Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hacking/target-cortex-a.html">Cortex A Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hacking/target-mm32.html">MindMotion MM32 Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hacking/target-clock-generation.html">Target Clock Generation</a></li>
</ul>

<h3>Versions</h3>
<ul>
	<li><a href="/">BMD 2.0 (in development)</a></li>
	<li><a href="/v1.x">BMD 1.10.2 (stable)</a></li>
</ul>
<div class="ablog-sidebar-item ablog__recentposts">
  <h3>
    <a href="../blog.html">Recent Posts</a>
  </h3>
  <ul>
     
    <li>
      <a href="../blog/2025-07-12-bmputil-release-v1_0_0.html">
        19 July - bmputil V1.0.0 Stable Release
      </a>
    </li>
    
    <li>
      <a href="../blog/2025-07-19-bmd-release-v2_0_0.html">
        19 July - Black Magic Debug V2.0.0 Stable Release
      </a>
    </li>
    
    <li>
      <a href="../blog/2025-03-03-release-candidate-v2_0_0-rc2.html">
        03 March - Black Magic Debug V2.0.0-rc2 Release Candidate
      </a>
    </li>
    
    <li>
      <a href="../blog/2025-01-07-release-candidate-v2_0_0-rc1.html">
        07 January - Black Magic Debug V2.0.0-rc1 Release Candidate
      </a>
    </li>
    
    <li>
      <a href="../blog/2024-01-11-release-v1_9_3.html">
        11 January - Black Magic Debug V1.9.3 Stable Release
      </a>
    </li>
    
  </ul>
</div>

<div class="ablog-sidebar-item ablog__archives">
  <h3>
    <a href="../blog/archive.html">Archives</a>
  </h3>
  <ul>
     
    <li>
      <a href="../blog/2025.html">2025 (4)</a>
    </li>
      
    <li>
      <a href="../blog/2024.html">2024 (2)</a>
    </li>
      
    <li>
      <a href="../blog/2023.html">2023 (8)</a>
    </li>
      
    <li>
      <a href="../blog/2022.html">2022 (7)</a>
    </li>
     
  </ul>
</div>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="swo.html" title="previous chapter">Serial Wire Output</a></li>
      <li>Next: <a href="platformio.html" title="next chapter">PlatformIO</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2022-2023, Piotr Esden-Tempski <piotr@esden.net>; 2022-2023, Rachel Mant <git@dragonmux.network>.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>