
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
    <link rel="icon" href="_static/favicon/icon.svg" type="image/svg+xml">
    <link rel="icon" href="_static/favicon/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="icon" href="_static/favicon/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-57x57.png" sizes="57x57" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-60x60.png" sizes="60x60" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-72x72.png" sizes="72x72" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-76x76.png" sizes="76x76" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-96x96.png" sizes="96x96" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-114x114.png" sizes="114x114" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-120x120.png" sizes="120x120" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-144x144.png" sizes="144x144" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-152x152.png" sizes="152x152" type="image/png">
    <link rel="apple-touch-icon" href="_static/favicon/apple-touch-icon-180x180.png" sizes="180x180" type="image/png">
    <link rel="android-icon" href="_static/favicon/android-icon-192x192.png" sizes="192x192" type="image/png">
<meta property="og:title" content="Firmware Upgrade" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://black-magic.org/upgrade.html" />
<meta property="og:site_name" content="Black Magic Debug" />
<meta property="og:description" content="Linux / MacOS: bmputil: Download or compile the Black Magic Debug (BMD) firmware. Regarding firmware selection: You can find the newest pre-built binaries on the GitHub Release Page., You can find ..." />
<meta property="og:image" content="https://black-magic.org/_static/blackmagic-logo.png" />
<meta property="og:image:alt" content="Black Magic Debug" />
<meta name="description" content="Linux / MacOS: bmputil: Download or compile the Black Magic Debug (BMD) firmware. Regarding firmware selection: You can find the newest pre-built binaries on the GitHub Release Page., You can find ..." />

    <title>Firmware Upgrade &#8212; Black Magic Debug  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/asciinema-player_2.6.1.css" />
    <link rel="stylesheet" type="text/css" href="_static/asciinema-custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/platformpicker.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/asciinema-player_2.6.1.js"></script>
    <script src="_static/platformpicker.js"></script>
    <link rel="canonical" href="https://black-magic.org/upgrade.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQ" href="knowledge/faq.html" />
    <link rel="prev" title="Getting Started" href="getting-started.html" /> 
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />
 
<link
  rel="alternate"
  type="application/atom+xml"
  href="blog/atom.xml"
  title="Blog"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
             <section id="firmware-upgrade">
<h1>Firmware Upgrade<a class="headerlink" href="#firmware-upgrade" title="Permalink to this heading">¶</a></h1>
<section id="linux-macos">
<h2>Linux / MacOS<a class="headerlink" href="#linux-macos" title="Permalink to this heading">¶</a></h2>
<section id="bmputil">
<h3>bmputil<a class="headerlink" href="#bmputil" title="Permalink to this heading">¶</a></h3>
<p>Download or compile the Black Magic Debug (BMD) firmware. Regarding firmware selection:</p>
<ul class="simple">
<li><p>You can find the newest pre-built binaries on the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/releases">GitHub Release Page</a>.</p></li>
<li><p>You can find the bleeding cutting edge binaries uploaded as assets on the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/actions/workflows/build-and-upload.yml">“build and upload” GitHub actions page</a>, Click on the newest successful build and download the <code class="docutils literal notranslate"><span class="pre">blackmagic-firmware.zip</span></code> file. It contains binaries for all the supported platforms.</p></li>
<li><p>When using the daily builds expect breaking changes. Please report issues on <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/issues">our issue page</a> or ask on our Discord server.</p></li>
</ul>
<p>Clone and build, or directly install the bmputil tool</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cargo install --git https://github.com/blackmagic-debug/bmputil
</pre></div>
</div>
<p>Plug in your Black Magic Probe and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bmputil flash blackmagic-native.elf
</pre></div>
</div>
<p>Provided you have suitable udev rules in play, this will already do everything you need and automatically reboot your unit back into the new firmware.</p>
</section>
<section id="dfu-util">
<h3>dfu-util<a class="headerlink" href="#dfu-util" title="Permalink to this heading">¶</a></h3>
<p>Download or compile a Black Magic Debug (BMD) firmware.
As with the <a class="reference internal" href="#bmputil"><span class="std std-doc">bmputil</span></a> section above, the same considerations exist with this method for firmware selection.</p>
<p>Plug in the Black Magic Probe into your computer and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dfu-util -d 1d50:6018,:6017 -s 0x08002000:leave -D blackmagic-native.bin
</pre></div>
</div>
<p>You will need to install <a class="reference external" href="http://dfu-util.sourceforge.net/"><code class="docutils literal notranslate"><span class="pre">dfu-util</span></code></a> package. On MacOS you can use homebrew, macports or fink depending on your preferred package manager. You will need version 0.8.0 or greater to support the dfuse commands.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">dfu-util</span></code> fails to switch your BMP into bootloader mode, or you feel like you might have <strong>bricked</strong> your BMP, you can also plug in your BMP while holding down the button. This will force the BMP to stay in the bootloader on power up.</p>
</div>
</section>
</section>
<section id="windows">
<h2>Windows<a class="headerlink" href="#windows" title="Permalink to this heading">¶</a></h2>
<section id="id1">
<h3>bmputil<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>Download or compile a Black Magic Probe (BMP) firmware.</p>
<p>Clone and build, or directly install the bmputil tool:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cargo install --git https://github.com/blackmagic-debug/bmputil
</pre></div>
</div>
<p>Plug in your Black Magic Probe and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bmputil flash blackmagic-native.elf
</pre></div>
</div>
<p>bmputil will automatically take care of your driver needs as appropriate.
Do <strong>not</strong> run Zadig on the DFU endpoint if using bmputil.</p>
</section>
<section id="id2">
<h3>dfu-util<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<p>Download or compile a Black Magic Probe (BMP) firmware.</p>
<p>Plug in the Black Magic Probe into your computer and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dfu-util.exe -d 1d50:6018,:6017 -s 0x08002000:leave -D blackmagic.bin
</pre></div>
</div>
<p>You will need to download the Windows release of <a class="reference external" href="http://dfu-util.sourceforge.net/"><code class="docutils literal notranslate"><span class="pre">dfu-util</span></code></a> package.</p>
<p>You may need use <a class="reference external" href="https://tracker.iplocation.net/icsj/">Zadig</a> to install the WinUSB driver. Both PID 0x6017 and 0x6018 need to be known to  <a class="reference external" href="https://tracker.iplocation.net/icsj/">Zadig</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On first run Zadig may not see the 6017 PID. Once the dfu exe runs and detaches the device, it should appear in Zadig. Install the WinUSB driver on it and re-run the dfu exe.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">dfu-util</span></code> fails to switch your BMP into bootloader mode, or you feel like you might have <strong>bricked</strong> your BMP, you can also plug in your BMP while holding down the button. This will force the BMP to stay in the bootloader on power up.</p>
</div>
</section>
</section>
<section id="using-stm32-mem-py">
<h2>Using stm32-mem.py<a class="headerlink" href="#using-stm32-mem-py" title="Permalink to this heading">¶</a></h2>
<p>An alternative solution is using <code class="docutils literal notranslate"><span class="pre">stm32_mem.py</span></code> script included in the Black Magic Debug source repository. It is not the recommended way of updating the Black Magic Probe as <code class="docutils literal notranslate"><span class="pre">dfu-util</span></code> is easier to install without the need to clone the Black Magic Debug repository and all the associated source code.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> blackmagic <span class="o">&amp;&amp;</span> scripts/stm32_mem.py blackmagic.bin
</pre></div>
</div>
</section>
</section>

<div class="section">
   
</div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/blackmagic-logo.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">The Plug&Play MCU Debugger</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=blackmagic-debug&repo=blackmagic&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Intro</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Supported Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Firmware Upgrade</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Knowledgebase</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="knowledge/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge/terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge/pinouts.html">Pinout Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge/links.html">Links</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage/gdb-commands.html">GDB Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/gdb-automation.html">GDB Flash Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/semihosting.html">Semihosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/traceswo.html">SWD - TRACESWO support</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/swo.html">Serial Wire Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/rtt.html">Using RTT</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/platformio.html">PlatformIO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Target Specific Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="target-usage/stm32.html">STM32 Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="target-usage/sam3x-4x-x7x.html">SAM3x-4x-x7x</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hacking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hacking/contrib.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/hacking.html">Firmware Hacking</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-drivers.html">Adding Target Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-cortex-m.html">Cortex-M Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-cortex-a.html">Cortex A Targets</a></li>
</ul>


<h3>
  <a href="blog.html">Recent Posts</a>
</h3>
<ul>
   
  <li>
    <a href="blog/2022-07-21-release-v1_8_2.html"
      >21 July - Stable Release V1.8.2</a
    >
  </li>
  
  <li>
    <a href="blog/2022-07-13-release-v1_8_1.html"
      >13 July - Stable Release V1.8.1</a
    >
  </li>
  
  <li>
    <a href="blog/2022-05-30-release-v1_8_0.html"
      >30 May - Stable Release V1.8.0</a
    >
  </li>
  
  <li>
    <a href="blog/2022-01-20-organization-rename.html"
      >20 January - GitHub Organization Name Change</a
    >
  </li>
  
  <li>
    <a href="blog/2022-01-07-new-maintainer.html"
      >07 January - New Project Maintainer</a
    >
  </li>
  
</ul>

<h3>
  <a href="blog/archive.html">Archives</a>
</h3>
<ul>
   
  <li>
    <a href="blog/2022.html">2022 (5)</a>
  </li>
   
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="getting-started.html" title="previous chapter">Getting Started</a></li>
      <li>Next: <a href="knowledge/faq.html" title="next chapter">FAQ</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Piotr Esden-Tempski <piotr@esden.net>; 2022, Rachel Mant <git@dragonmux.network>.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>