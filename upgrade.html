<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href="_static/favicon/icon.svg">
    <link rel="icon" sizes="16x16" type="image/png" href="_static/favicon/favicon-16x16.png">
    <link rel="icon" sizes="32x32" type="image/png" href="_static/favicon/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="57x57" type="image/png" href="_static/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" type="image/png" href="_static/favicon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" type="image/png" href="_static/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" type="image/png" href="_static/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="96x96" type="image/png" href="_static/favicon/apple-touch-icon-96x96.png">
    <link rel="apple-touch-icon" sizes="114x114" type="image/png" href="_static/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" type="image/png" href="_static/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" type="image/png" href="_static/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" type="image/png" href="_static/favicon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" type="image/png" href="_static/favicon/apple-touch-icon-180x180.png">
    <link rel="android-icon" sizes="192x192" type="image/png" href="_static/favicon/android-icon-192x192.png"><meta property="og:title" content="Firmware Upgrade" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://black-magic.org/upgrade.html" />
<meta property="og:site_name" content="Black Magic Debug" />
<meta property="og:description" content="Linux / macOS: Download or compile the Black Magic Debug (BMD) firmware. Regarding firmware selection: You can find the newest pre-built binaries on the GitHub Release Page., You can find the bleed..." />
<meta property="og:image" content="https://black-magic.org/_static/blackmagic-logo.png" />
<meta property="og:image:alt" content="Black Magic Debug" />
<meta name="description" content="Linux / macOS: Download or compile the Black Magic Debug (BMD) firmware. Regarding firmware selection: You can find the newest pre-built binaries on the GitHub Release Page., You can find the bleed..." />

    <title>Firmware Upgrade &#8212; Black Magic Debug  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="_static/asciinema-player_2.6.1.css" />
    <link rel="stylesheet" type="text/css" href="_static/asciinema-custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/platformpicker.css" />
    <script src="_static/documentation_options.js?v=7f41d439"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/asciinema-player_2.6.1.js"></script>
    <script src="_static/platformpicker.js"></script>
    <link rel="canonical" href="https://black-magic.org/upgrade.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Supported Targets" href="supported-targets.html" />
    <link rel="prev" title="Getting Started" href="getting-started.html" />

   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />


<link
  rel="alternate"
  type="application/atom+xml"
  href="blog/atom.xml"
  title="Blog"
/>



  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
<section id="firmware-upgrade">
<h1>Firmware Upgrade<a class="headerlink" href="#firmware-upgrade" title="Link to this heading">¶</a></h1>
<section id="linux-macos">
<h2>Linux / macOS<a class="headerlink" href="#linux-macos" title="Link to this heading">¶</a></h2>
<p>Download or compile the Black Magic Debug (BMD) firmware. Regarding firmware selection:</p>
<ul class="simple">
<li><p>You can find the newest pre-built binaries on the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/releases">GitHub Release Page</a>.</p></li>
<li><p>You can find the bleeding cutting edge binaries uploaded as assets on the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/actions/workflows/build-and-upload.yml">“build and upload” GitHub actions page</a>, Click on the newest successful build and download the <code class="docutils literal notranslate"><span class="pre">blackmagic-firmware.zip</span></code> file. It contains binaries for all the supported platforms.</p></li>
<li><p>When using the daily builds expect breaking changes. Please report issues on <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/issues">our issue page</a> or ask on our Discord server.</p></li>
</ul>
<p>Upgrade the firmware of the Black Magic Debug Probe using either:</p>
<ul class="simple">
<li><p>bmputil</p></li>
<li><p>dfu-util</p></li>
<li><p>stlink-tool</p></li>
</ul>
<section id="bmputil">
<h3>bmputil<a class="headerlink" href="#bmputil" title="Link to this heading">¶</a></h3>
<p>Clone and build the <a class="reference external" href="https://github.com/blackmagic-debug/bmputil">bmputil</a> tool.</p>
<p>Plug your Black Magic Probe into your computer and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bmputil<span class="w"> </span>flash<span class="w"> </span>blackmagic-native.elf
</pre></div>
</div>
<p>Provided you have suitable udev rules in play, this will already do everything you need and automatically reboot your unit back into the new firmware.</p>
</section>
<section id="dfu-util">
<h3>dfu-util<a class="headerlink" href="#dfu-util" title="Link to this heading">¶</a></h3>
<p>Install <a class="reference external" href="http://dfu-util.sourceforge.net/"><code class="docutils literal notranslate"><span class="pre">dfu-util</span></code></a>. On macOS you can use homebrew, macports or fink depending on your preferred package manager. You will need version 0.8.0 or greater to support the dfuse commands.</p>
<p>Plug the Black Magic Probe into your computer and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>dfu-util<span class="w"> </span>-d<span class="w"> </span>1d50:6018,:6017<span class="w"> </span>-s<span class="w"> </span>0x08002000:leave<span class="w"> </span>-D<span class="w"> </span>blackmagic-native.bin
</pre></div>
</div>
<p>To upgrade non-native hardware see the readme of the different <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/tree/main/src/platforms">platforms on GitHub</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">dfu-util</span></code> fails to switch your BMP into bootloader mode, or you feel like you might have <strong>bricked</strong> your BMP, you can also plug in your BMP while holding down the button. This will force the BMP to stay in the bootloader on power up.</p>
</div>
</section>
<section id="stlink-tool">
<h3>stlink-tool<a class="headerlink" href="#stlink-tool" title="Link to this heading">¶</a></h3>
<p>The firmware on an ST-Link can be upgraded using <a class="reference external" href="https://github.com/blackmagic-debug/stlink-tool">blackmagic-debug/stlink-tool</a>.</p>
<p>To upgrade, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>stlink-tool<span class="w"> </span>blackmagic.bin
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This software upgrades the firmware of the ST-Link probe, <strong>not</strong> the firmware of a target connected to the probe. Therefore please ensure you want to upgrade the firmware of the ST-Link probe, and use a blackmagic.bin file built specifically for ST-Link.</p>
</div>
</section>
</section>
<section id="windows">
<h2>Windows<a class="headerlink" href="#windows" title="Link to this heading">¶</a></h2>
<p>Download or compile the Black Magic Debug (BMD) firmware. Regarding firmware selection:</p>
<ul class="simple">
<li><p>You can find the newest pre-built binaries on the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/releases">GitHub Release Page</a>.</p></li>
<li><p>You can find the bleeding cutting edge binaries uploaded as assets on the <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/actions/workflows/build-and-upload.yml">“build and upload” GitHub actions page</a>, Click on the newest successful build and download the <code class="docutils literal notranslate"><span class="pre">blackmagic-firmware.zip</span></code> file. It contains binaries for all the supported platforms.</p></li>
<li><p>When using the daily builds expect breaking changes. Please report issues on <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/issues">our issue page</a> or ask on our Discord server.</p></li>
</ul>
<p>Upgrade the firmware of the Black Magic Debug Probe using either:</p>
<ul class="simple">
<li><p>bmputil</p></li>
<li><p>dfu-util</p></li>
<li><p>stlink-tool</p></li>
</ul>
<section id="id1">
<h3>bmputil<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<p>Clone and build the <a class="reference external" href="https://github.com/blackmagic-debug/bmputil">bmputil</a> tool.</p>
<p>Plug your Black Magic Probe into your computer and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bmputil<span class="w"> </span>flash<span class="w"> </span>blackmagic-native.elf
</pre></div>
</div>
<p>bmputil will automatically take care of the needed drivers.
Do <strong>not</strong> run Zadig on the DFU endpoint if using bmputil.</p>
</section>
<section id="id2">
<h3>dfu-util<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>Download the Windows release of <a class="reference external" href="http://dfu-util.sourceforge.net/"><code class="docutils literal notranslate"><span class="pre">dfu-util</span></code></a>.</p>
<p>Plug the Black Magic Probe into your computer and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dfu-util.exe<span class="w"> </span>-d<span class="w"> </span>1d50:6018,:6017<span class="w"> </span>-s<span class="w"> </span>0x08002000:leave<span class="w"> </span>-D<span class="w"> </span>blackmagic.bin
</pre></div>
</div>
<p>To upgrade non-native hardware see the readme of the different <a class="reference external" href="https://github.com/blackmagic-debug/blackmagic/tree/main/src/platforms">platforms on GitHub</a>.</p>
<p>You may need use <a class="reference external" href="https://tracker.iplocation.net/icsj/">Zadig</a> to install the WinUSB driver. Both PID 0x6017 and 0x6018 need to be known to <a class="reference external" href="https://tracker.iplocation.net/icsj/">Zadig</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On first run Zadig may not see the 6017 PID. Once the dfu exe runs and detaches the device, it should appear in Zadig. Install the WinUSB driver on it and re-run the dfu exe.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">dfu-util</span></code> fails to switch your BMP into bootloader mode, or you feel like you might have <strong>bricked</strong> your BMP, you can also plug in your BMP while holding down the button. This will force the BMP to stay in the bootloader on power up.</p>
</div>
</section>
<section id="id3">
<h3>stlink-tool<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>The firmware on an ST-Link can be upgraded using <a class="reference external" href="https://github.com/dragonmux/stlink-tool/tree/feature/compilation-fixes">dragonmux/stlink-tool</a>.</p>
<p>The linked repository is forked from <a class="reference external" href="https://github.com/UweBonnes/stlink-tool">UweBonnes/stlink-tool</a>, which in turn is a fork from <a class="reference external" href="https://github.com/jeanthom/stlink-tool">jeanthom/stlink-tool</a>. The link points to a specific branch named <code class="docutils literal notranslate"><span class="pre">feature/compilation-fixes</span></code>. Please ensure to checkout to to this branch after cloning the repository, as both UweBonnes and dragonmux have made fixes that are not included in the repository by jeanthom.</p>
<p>To upgrade, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>stlink-tool<span class="w"> </span>blackmagic.bin
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This software upgrades the firmware of the ST-Link probe, <strong>not</strong> the firmware of a target connected to the probe. Therefore please ensure you want to upgrade the firmware of the ST-Link probe, and use a blackmagic.bin file built specifically for ST-Link.</p>
</div>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/blackmagic-logo.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">The Plug&Play MCU Debugger</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=blackmagic-debug&repo=blackmagic&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Intro</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Supported Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Firmware Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported-targets.html">Supported Targets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Knowledgebase</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="knowledge/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge/terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge/pinouts.html">Pinout Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="knowledge/links.html">Links</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage/gdb-commands.html">GDB Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/gdb-automation.html">GDB Flash Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/semihosting.html">Semihosting</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/traceswo.html">SWD - TRACESWO support</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/swo.html">Serial Wire Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/rtt.html">Using RTT</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/platformio.html">PlatformIO</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Target Specific Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="target-usage/stm32.html">STM32 Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="target-usage/sam3x-4x-x7x.html">SAM3x-4x-x7x</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hacking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hacking/contrib.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/hacking.html">Firmware Hacking</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-drivers.html">Adding Target Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-cortex-m.html">Cortex-M Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-cortex-a.html">Cortex A Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-mm32.html">MindMotion MM32 Targets</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking/target-clock-generation.html">Target Clock Generation</a></li>
</ul>


<div class="ablog-sidebar-item ablog__recentposts">
<h3>
  <a href="blog.html">Recent Posts</a>
</h3>
<ul>
  
  
  <li>
    <a href="blog/2023-09-17-release-candidate-v1_10_0-rc0.html">
      17 September - Release Candidate V1.10.0-rc0
    </a>
  </li>
  
  <li>
    <a href="blog/2023-09-16-release-v1_9_2.html">
      16 September - Stable Release V1.9.2
    </a>
  </li>
  
  <li>
    <a href="blog/2023-09-16-release-v1_8_3.html">
      16 September - Stable Release V1.8.3
    </a>
  </li>
  
  <li>
    <a href="blog/2023-04-28-release-v1_9_1.html">
      28 April - Stable Release V1.9.1
    </a>
  </li>
  
  <li>
    <a href="blog/2023-01-27-release-v1_9_0.html">
      27 January - Stable Release V1.9.0
    </a>
  </li>
  
</ul>
</div>

<div class="ablog-sidebar-item ablog__archive">
<h3>
  <a href="blog/archive.html">Archives</a>
</h3>
<ul>
  
  
  <li>
    <a href="blog/2023.html">2023 (5)</a>
  </li>
  
  
  
  <li>
    <a href="blog/2022.html">2022 (7)</a>
  </li>
  
  
</ul>
</div>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="getting-started.html" title="previous chapter">Getting Started</a></li>
      <li>Next: <a href="supported-targets.html" title="next chapter">Supported Targets</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022-2023, Piotr Esden-Tempski <piotr@esden.net>; 2022-2023, Rachel Mant <git@dragonmux.network>.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>